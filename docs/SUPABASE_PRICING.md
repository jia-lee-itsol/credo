# Supabase 비용 분석

## Supabase 가격 정책 (2024)

### 플랜 비교

| 플랜 | 월 요금 | 데이터베이스 | 스토리지 | 대역폭 | Edge Functions | 사용자 수 |
|------|---------|-------------|---------|--------|----------------|----------|
| **Free** | $0 | 500MB | 1GB | 2GB | 150초/요청 | 무제한 |
| **Pro** | $25 | 8GB (+$0.125/GB) | 100GB (+$0.021/GB) | 250GB (+$0.09/GB) | 400초/요청 | 무제한 |
| **Team** | $599 | 전용 디스크 | 전용 디스크 | 전용 | 1000초/요청 | 무제한 |

---

## Credo 앱 비용 예상

### 시나리오 1: 초기 단계 (1,000명 사용자)

#### 데이터 사용량 예상
- **사용자 데이터**: 1,000명 × 2KB = 2MB
- **교회 데이터**: 1,000개 × 5KB = 5MB
- **게시글**: 5,000개 × 3KB = 15MB
- **댓글**: 20,000개 × 1KB = 20MB
- **인덱스/메타데이터**: ~10MB
- **총 데이터베이스**: ~52MB

#### 스토리지 사용량
- **프로필 이미지**: 1,000명 × 200KB = 200MB
- **게시글 이미지**: 5,000개 × 500KB = 2.5GB
- **총 스토리지**: ~2.7GB

#### API 요청 (월간)
- **읽기**: 100,000회 (사용자 조회, 게시글 조회 등)
- **쓰기**: 20,000회 (게시글 작성, 댓글 등)
- **대역폭**: ~5GB

#### 비용 계산

**Free 플랜:**
- 데이터베이스: 52MB < 500MB ✅
- 스토리지: 2.7GB > 1GB ❌ (초과)
- **결론**: Free 플랜으로는 부족

**Pro 플랜 ($25/월):**
- 기본 요금: $25
- 데이터베이스: 52MB < 8GB ✅ (추가 비용 없음)
- 스토리지: 2.7GB < 100GB ✅ (추가 비용 없음)
- 대역폭: 5GB < 250GB ✅ (추가 비용 없음)
- **총 비용: $25/월**

---

### 시나리오 2: 성장 단계 (10,000명 사용자)

#### 데이터 사용량 예상
- **사용자 데이터**: 10,000명 × 2KB = 20MB
- **교회 데이터**: 1,000개 × 5KB = 5MB
- **게시글**: 50,000개 × 3KB = 150MB
- **댓글**: 200,000개 × 1KB = 200MB
- **인덱스/메타데이터**: ~50MB
- **총 데이터베이스**: ~425MB

#### 스토리지 사용량
- **프로필 이미지**: 10,000명 × 200KB = 2GB
- **게시글 이미지**: 50,000개 × 500KB = 25GB
- **총 스토리지**: ~27GB

#### API 요청 (월간)
- **읽기**: 1,000,000회
- **쓰기**: 200,000회
- **대역폭**: ~50GB

#### 비용 계산

**Pro 플랜 ($25/월):**
- 기본 요금: $25
- 데이터베이스: 425MB < 8GB ✅ (추가 비용 없음)
- 스토리지: 27GB < 100GB ✅ (추가 비용 없음)
- 대역폭: 50GB < 250GB ✅ (추가 비용 없음)
- **총 비용: $25/월**

---

### 시나리오 3: 확장 단계 (50,000명 사용자)

#### 데이터 사용량 예상
- **사용자 데이터**: 50,000명 × 2KB = 100MB
- **교회 데이터**: 1,000개 × 5KB = 5MB
- **게시글**: 250,000개 × 3KB = 750MB
- **댓글**: 1,000,000개 × 1KB = 1GB
- **인덱스/메타데이터**: ~200MB
- **총 데이터베이스**: ~2GB

#### 스토리지 사용량
- **프로필 이미지**: 50,000명 × 200KB = 10GB
- **게시글 이미지**: 250,000개 × 500KB = 125GB
- **총 스토리지**: ~135GB

#### API 요청 (월간)
- **읽기**: 5,000,000회
- **쓰기**: 1,000,000회
- **대역폭**: ~250GB

#### 비용 계산

**Pro 플랜 ($25/월):**
- 기본 요금: $25
- 데이터베이스: 2GB < 8GB ✅ (추가 비용 없음)
- 스토리지: 135GB > 100GB ❌
  - 초과: 35GB × $0.021 = $0.735
- 대역폭: 250GB = 250GB ✅ (추가 비용 없음)
- **총 비용: $25.74/월**

---

### 시나리오 4: 대규모 (100,000명 사용자)

#### 데이터 사용량 예상
- **총 데이터베이스**: ~5GB
- **총 스토리지**: ~270GB
- **대역폭**: ~500GB

#### 비용 계산

**Pro 플랜 ($25/월):**
- 기본 요금: $25
- 데이터베이스: 5GB < 8GB ✅
- 스토리지: 270GB > 100GB
  - 초과: 170GB × $0.021 = $3.57
- 대역폭: 500GB > 250GB
  - 초과: 250GB × $0.09 = $22.50
- **총 비용: $51.07/월**

**또는 Team 플랜 ($599/월):**
- 전용 리소스
- 무제한 사용
- **총 비용: $599/월**

---

## Firebase vs Supabase 비용 비교

### 1,000명 사용자
| 서비스 | 월 비용 |
|--------|---------|
| Firebase | $0-40 |
| Supabase Pro | $25 |
| **추천** | Firebase (무료 티어 활용) |

### 10,000명 사용자
| 서비스 | 월 비용 |
|--------|---------|
| Firebase | $80-230 |
| Supabase Pro | $25 |
| **추천** | **Supabase** (더 저렴) |

### 50,000명 사용자
| 서비스 | 월 비용 |
|--------|---------|
| Firebase | $200-500 |
| Supabase Pro | $25-50 |
| **추천** | **Supabase** (더 저렴) |

### 100,000명 사용자
| 서비스 | 월 비용 |
|--------|---------|
| Firebase | $500-1,000+ |
| Supabase Pro | $50-100 |
| Supabase Team | $599 |
| **추천** | **Supabase Pro** (비용 효율적) |

---

## Supabase 추가 비용 항목

### 1. Edge Functions
- **무료**: 150초/요청
- **Pro**: 400초/요청
- **Team**: 1000초/요청
- 초과 시: $0.0000025/GB-초

### 2. 실시간 (Realtime)
- 모든 플랜에서 무료
- 연결 수 제한 없음

### 3. 인증 (Auth)
- 모든 플랜에서 무제한 사용자
- 소셜 로그인 (Google, Apple) 무료

### 4. 벡터 검색 (Vector)
- Pro 플랜부터 사용 가능
- 추가 비용 없음 (플랜 내)

---

## Supabase의 장점 (비용 관점)

### ✅ 장점
1. **예측 가능한 비용**: Pro 플랜 $25로 시작
2. **무료 티어**: 개발/테스트 용도로 충분
3. **오픈소스**: 벤더 종속성 없음
4. **PostgreSQL**: 강력한 쿼리 기능
5. **자체 호스팅 가능**: 비용 절감 가능

### ⚠️ 주의사항
1. **스토리지 초과 시**: GB당 $0.021 추가
2. **대역폭 초과 시**: GB당 $0.09 추가 (비쌈!)
3. **대규모 트래픽**: Team 플랜($599) 필요할 수 있음

---

## 비용 최적화 팁

### 1. 이미지 최적화
- 이미지 압축으로 스토리지 사용량 감소
- CDN 활용 (Supabase Storage는 자동 CDN 포함)

### 2. 캐싱 전략
- 클라이언트 측 캐싱으로 API 요청 감소
- 교회 데이터 등 정적 데이터 캐싱

### 3. 데이터 정리
- 오래된 게시글 아카이빙
- 사용하지 않는 이미지 삭제

### 4. 모니터링
- Supabase Dashboard에서 사용량 모니터링
- 알림 설정으로 초과 방지

---

## 결론 및 권장사항

### Supabase가 더 저렴한 경우
- ✅ **10,000명 이상 사용자**
- ✅ **대량의 이미지 업로드**
- ✅ **복잡한 쿼리 필요**
- ✅ **예측 가능한 비용 선호**

### Firebase가 더 나은 경우
- ✅ **1,000명 이하 사용자** (무료 티어)
- ✅ **이미 Firebase 인프라 구축됨**
- ✅ **빠른 프로토타이핑**
- ✅ **Google 생태계 활용**

### Credo 앱 권장사항

**단기 (1-6개월):**
- Firebase 유지 (이미 구축됨)
- 비용: $0-40/월

**중기 (6개월-1년):**
- 사용자 10,000명 이상 시 Supabase로 마이그레이션 고려
- 비용 절감: $80-230 → $25/월

**장기 (1년 이상):**
- Supabase Pro 플랜으로 전환
- 예상 비용: $25-100/월 (사용자 수에 따라)

---

## 마이그레이션 비용 고려사항

### 개발 비용
- 코드 수정: 1-2주
- 테스트: 1주
- 배포: 1일

### 데이터 마이그레이션
- Firestore → PostgreSQL 변환
- 이미지 재업로드 (필요시)
- **예상 시간**: 1-2일

### 총 마이그레이션 비용
- **개발 시간**: 2-3주
- **다운타임**: 최소화 가능 (점진적 마이그레이션)

---

## 최종 추천

### 현재 상황 (Firebase 사용 중)
→ **Firebase 유지 권장**
- 이미 구축된 인프라 활용
- 초기 단계에서는 비용 차이 미미
- 개발 리소스 절약

### 사용자 10,000명 이상 달성 시
→ **Supabase 마이그레이션 고려**
- 월 $50-200 절감 가능
- PostgreSQL의 강력한 기능 활용
- 장기적 비용 효율성

### 사용자 50,000명 이상
→ **Supabase Pro 강력 추천**
- Firebase 대비 월 $150-450 절감
- 예측 가능한 비용 구조
- 더 나은 쿼리 성능

